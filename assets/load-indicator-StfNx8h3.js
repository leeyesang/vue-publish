import{O as W,x as l,y,z as C,A as c,B as f,C as h,E,F as I,G as k,H as A,I as O,J as g,K as D,L,M,N}from"./index-CfxZhtFj.js";const F=E.add,P=["info","warning","error","success"],m=[],B={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},R={h:0,v:0};F((()=>{const t=I.getDocument();f.subscribeGlobal(t,k.down,(e=>{for(let n=m.length-1;n>=0;n-=1){var o,i;if(!((o=(i=m[n])._proxiedDocumentDownHandler)!==null&&o!==void 0&&o.call(i,e)))return}}))}));class $ extends W{_getDefaultOptions(){return l({},super._getDefaultOptions(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})}_defaultOptionsRules(){const e={displayTime:y(C())?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}},o=[{device:n=>n.deviceType==="phone",options:l({width:"calc(100vw - 40px)"},e)},{device:n=>n.deviceType==="tablet",options:l({width:"auto",maxWidth:"80vw"},e)},{device:n=>y(C())&&n.deviceType==="desktop",options:{minWidth:344,maxWidth:568,displayTime:4e3}}];return[...super._defaultOptionsRules(),...o]}_init(){super._init(),this._posStringToObject()}_renderContentImpl(){const{message:e,type:o}=this.option();return this._message=c("<div>").addClass("dx-toast-message").text(e??"").appendTo(this.$content()),this.setAria("role","alert",this._message),o&&P.includes(o.toLowerCase())&&this.$content().prepend(c("<div>").addClass("dx-toast-icon")),super._renderContentImpl()}_render(){super._render(),this.$element().addClass("dx-toast"),this.$wrapper().addClass("dx-toast-wrapper");const{type:e}=this.option();e&&this.$content().addClass(`dx-toast-${e.toLowerCase()}`),this.$content().addClass("dx-toast-content"),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")}_toggleCloseEvents(e){const o=`dx${e.toLowerCase()}`;f.off(this.$content(),o);const i=`closeOn${e}`;this.option(i)&&f.on(this.$content(),o,this.hide.bind(this))}_posStringToObject(){const{position:e}=this.option();if(!h(e))return;const o=e.split(" ")[0],i=e.split(" ")[1],n=l({boundaryOffset:R},B[o]);switch(this.option("position",n),i){case"center":case"left":case"right":if(n&&typeof n=="object"){const a=`${n.at} ${i}`,r=`${n.my} ${i}`;this.option("position.at",a),this.option("position.my",r)}}}_show(){const e=super._show();return e.always((()=>{clearTimeout(this._hideTimeout);const{displayTime:o}=this.option();this._hideTimeout=setTimeout(this.hide.bind(this),o)})),e}_overlayStack(){return m}_zIndexInitValue(){return super._zIndexInitValue()+8e3}_dispose(){clearTimeout(this._hideTimeout),super._dispose()}_optionChanged(e){const{name:o,value:i,previousValue:n}=e;switch(o){case"type":this.$content().removeClass(`dx-toast-${n}`),i&&this.$content().addClass(`dx-toast-${String(i).toLowerCase()}`);break;case"message":this._message&&this._message.text(i);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:super._optionChanged(e)}}}A("dxToast",$);const b=D();let v=null;const T={},_={"top left":{top:10,left:10},"top right":{top:10,right:10},"bottom left":{bottom:10,left:10},"bottom right":{bottom:10,right:10},"top center":t=>({top:10,left:Math.round(t.windowWidth/2-t.toastWidth/2)}),"left center":t=>({top:Math.round(t.windowHeight/2-t.toastHeight/2),left:10}),"right center":t=>({top:Math.round(t.windowHeight/2-t.toastHeight/2),right:10}),center:t=>({top:Math.round(t.windowHeight/2-t.toastHeight/2),left:Math.round(t.windowWidth/2-t.toastWidth/2)}),"bottom center":t=>({bottom:10,left:Math.round(t.windowWidth/2-t.toastWidth/2)})},z={up:(t,e)=>({bottom:t.bottom??e.windowHeight-e.toastHeight-(t.top??0),top:"",left:t.left??"",right:t.right??""}),down:(t,e)=>({top:t.top??e.windowHeight-e.toastHeight-(t.bottom??0),bottom:"",left:t.left??"",right:t.right??""}),left:(t,e)=>({right:t.right??e.windowWidth-e.toastWidth-(t.left??0),left:"",top:t.top??"",bottom:t.bottom??""}),right:(t,e)=>({left:t.left??e.windowWidth-e.toastWidth-(t.right??0),right:"",top:t.top??"",bottom:t.bottom??""})},V=t=>h(t)&&t.includes("top")?"down-push":"up-push",j=t=>{const e=c("<div>").appendTo(O());return T[t]=e,e},G=t=>T[t]||j(t),U=(t,e)=>{const o=`dx-toast-stack dx-toast-stack-${e}-direction`;t.removeAttr("class").addClass(o)},Y=(t,e)=>{const o=t?_[t]:_["bottom center"];return typeof o=="function"?o(e):o},J=(t,e,o)=>{const i=t.replace(/-push|-stack/g,""),n=z[i];return n?n(e,o):{top:"",bottom:"",left:"",right:""}},K=(t,e,o)=>{const{offsetWidth:i,offsetHeight:n}=t.children().first().get(0),a={toastWidth:i,toastHeight:n,windowHeight:b.innerHeight,windowWidth:b.innerWidth},r=h(o)?Y(o,a):o,d=J(e,r,a);t.css(d)},q=(t,e,o)=>{const i=g(t)?t:{message:t},n=g(e)?e:void 0,a=g(e)?void 0:e,{onHidden:r,onShowing:d}=i,p={onHidden:s=>{c(s.element).remove(),r?.(s)}};if(a!==void 0&&(p.type=a),o!==void 0&&(p.displayTime=o),n!=null&&n.position){const{position:s}=n,w=n.direction||V(s),x=h(s)?s:`${s.top}-${s.left}-${s.bottom}-${s.right}`,u=G(x);return U(u,w),l({},i,p,{container:u,_skipContentPositioning:!0,onShowing:H=>{K(u,w,s),d?.(H)}})}return l({},i,p)},tt=(t,e,o)=>{const i=q(t,e,o);v=c("<div>").appendTo(O()),new $(v,i).show()};const S={props:{elementAttr:Object,height:[Number,String],hint:String,indicatorSrc:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,visible:Boolean,width:[Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:elementAttr":null,"update:height":null,"update:hint":null,"update:indicatorSrc":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:visible":null,"update:width":null},computed:{instance(){return this.$_instance}},beforeCreate(){this.$_WidgetClass=M,this.$_hasAsyncTemplate=!0}};N(S);const et=L(S);export{et as D,tt as n};
