import{D as y,n as C}from"./load-indicator-CWQPhQmT.js";import{X as B,h as I,a2 as q,a3 as R,a4 as E,a5 as M,a1 as S,aa as T,D as N,b as p,e,d as c,i as s,a6 as o,a7 as V,Y as f,ab as A,$ as F,a as L,r as O,a8 as P,a9 as j,u as X,j as m}from"./index-Cq3hQzo1.js";const Y={setup(){const u=X(),a=j(),r=L({email:"",password:""}),t=O(!1);function _(){a.push("/create-account")}async function x(){const{email:i,password:d}=r;t.value=!0;const n=await P.logIn(i,d);n.isOk?a.push(u.query.redirect||"/home"):(t.value=!1,C(n.message,"error",2e3))}return{formData:r,loading:t,onCreateAccountClick:_,onSubmit:x}},components:{DxLoadIndicator:y,DxForm:N,DxEmailRule:T,DxRequiredRule:S,DxItem:M,DxLabel:E,DxButtonItem:R,DxButtonOptions:q,DxButton:I}},z={class:"dx-button-text"},G={key:1},H={class:"link"};function J(u,a,r,t,_,x){const i=o("dx-required-rule"),d=o("dx-email-rule"),n=o("dx-label"),l=o("dx-item"),b=o("dx-button-options"),g=o("dx-button-item"),h=o("dx-load-indicator"),k=o("dx-form"),w=o("router-link"),v=o("dx-button");return m(),p("form",{class:"login-form",onSubmit:a[0]||(a[0]=F((...D)=>t.onSubmit&&t.onSubmit(...D),["prevent"]))},[e(k,{"form-data":t.formData,disabled:t.loading},{signInTemplate:s(()=>[c("div",null,[c("span",z,[t.loading?(m(),V(h,{key:0,width:"24px",height:"24px",visible:!0})):f("",!0),t.loading?f("",!0):(m(),p("span",G,"Sign In"))])])]),default:s(()=>[e(l,{"data-field":"email","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Email",mode:"email"}},{default:s(()=>[e(i,{message:"Email is required"}),e(d,{message:"Email is invalid"}),e(n,{visible:!1})]),_:1}),e(l,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Password",mode:"password"}},{default:s(()=>[e(i,{message:"Password is required"}),e(n,{visible:!1})]),_:1}),e(l,{"data-field":"rememberMe","editor-type":"dxCheckBox","editor-options":{text:"Remember me",elementAttr:{class:"form-text"}}},{default:s(()=>[e(n,{visible:!1})]),_:1}),e(g,null,{default:s(()=>[e(b,{width:"100%",type:"default",template:"signInTemplate","use-submit-behavior":!0})]),_:1})]),_:1},8,["form-data","disabled"]),c("div",H,[e(w,{to:"/reset-password"},{default:s(()=>[...a[1]||(a[1]=[A("Forgot password?",-1)])]),_:1})]),e(v,{text:"Create an account",stylingMode:"outlined",width:"100%",onClick:t.onCreateAccountClick},null,8,["onClick"])],32)}const U=B(Y,[["render",J]]);export{U as default};
